{% include "header.html" %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Profile - Aryavarta Art</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>

  <style>
    body {
      background: url('{% static "bg-art.jpg" %}') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Segoe UI', sans-serif;
    }

    .main-card {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(12px);
      max-width: 700px;
      margin: 30px auto;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      padding: 40px 30px;
      animation: fadeIn 1s ease;
    }

    .main-card h2 {
      font-size: 2.2rem;
      color: #404040ff;
      margin-bottom: 30px;
    }

    .profile-info {
      display: grid;
      gap: 20px;
      text-align: left;
    }

    .info-item {
      display: flex;
      align-items: center;
      gap: 15px;
      background: #f8f8f8;
      border-radius: 12px;
      padding: 12px 18px;
      transition: 0.3s ease;
    }

    .info-item:hover {
      background: #e3fce5;
      transform: scale(1.02);
    }

    .info-icon {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-size: 20px;
    }

    .green { background: linear-gradient(45deg, #43cea2, #185a9d); }
    .blue { background: linear-gradient(45deg, #36d1dc, #5b86e5); }
    .orange { background: linear-gradient(45deg, #ff8008, #ffc837); }
    .purple { background: linear-gradient(45deg, #a18cd1, #fbc2eb); }
    .red { background: linear-gradient(45deg, #e53935, #e35d5b); }

    .info-label {
      font-size: 0.9rem;
      font-weight: 600;
      color: #555;
    }

    .info-value {
      font-size: 1.2rem;
      font-weight: 500;
      color: #333;
    }

    .logout-btn, .upload-art-btn {
      
      margin-top: 25px;
      padding: 12px 30px;
      border-radius: 30px;
      border: none;
      font-weight: bold;
      font-size: 1rem;
      transition: 0.3s ease;
    }

.lgot{
  display:flex;
margin-top:20px;
justify-content:center;
align-items:center;
gap:30px;
}


    .logout-btn {
      
  border: 1px solid #ddd; /* Subtle border for structure */
  padding: 10px 22px;
  width:160px;
  border-radius: 50px;
  font-size: 1.3rem;
  font-weight: 500;
  cursor: pointer;
  background-color: white;
  color: #333;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0,0,0,0.28);
  transition: background-color 0.25s ease, color 0.25s ease, box-shadow 0.25s ease, transform 0.15s ease;
    }

    .logout-btn:hover {
  background-color: #fde3e3ff;
  border-color: #d21919ff;
  color: #a10d0dff;
  box-shadow: 0 2px 6px rgba(210, 25, 25, 0.15);
  transform: translateY(-1px);
    }

    .upload-art-btn {
  border: 1px solid #ddd; /* Subtle border for structure */
  margin-right:120px;
  padding: 10px 22px;
  border-radius: 50px;
  width:260px;
  font-size: 1.2rem;
  font-weight: 500;
  cursor: pointer;
  background-color: white;
  color: #333;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0,0,0,0.28);
  transition: background-color 0.25s ease, color 0.25s ease, box-shadow 0.25s ease, transform 0.15s ease;
    }

    .upload-art-btn:hover {
  background-color: #e8f5e9;
  border-color: #4CAF50;
  color: #2e7d32;
  box-shadow: 0 2px 6px rgba(76, 175, 80, 0.15);
  transform: translateY(-1px);
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    /* ===== MODAL STYLING ===== */
    .modal-backdrop.show {
      opacity: 0 !important;
      background: transparent !important;
    }

    .modal-content {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(18px) saturate(180%);
      border-radius: 25px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 40px rgba(0, 0, 0, 0.4);
      animation: popIn 0.6s ease-out;
      overflow: hidden;
    }

    .modal-header {
      background: linear-gradient(45deg, #5454547b, #e7d9d579);
      color: #fff;
      border-bottom: none;
      font-weight: bold;
      padding: 20px;
      text-shadow: 1px 1px 2px #444;
    }

    .modal-title i {
      animation: pulseColor 3s infinite alternate;
    }

    .modal-body {
      padding: 30px;
    }

    .modal .form-label {
      font-weight: 600;
      color: #4e4e4e;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 1.1rem;
    }

    .modal .form-control {
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid #ccc;
      border-radius: 12px;
      transition: 0.3s;
      color: #212121;
    }

    .modal .form-control:focus {
      box-shadow: 0 0 8px rgba(81, 81, 81, 0.4);
      background: rgba(255, 255, 255, 0.9);
    }

    .modal .form-control::placeholder {
      color: #777;
      font-style: italic;
    }

    .modal .btn-submit {
  background-color: #e8f5e9;
  border-color: #4b4b4bff;
  color: #2e7d32;
  box-shadow: 0 2px 6px rgba(76, 175, 80, 0.15);
  transform: translateY(-1px);
      border: 1px solid #2e7d32;
      margin-left: 120px;
      font-size: 1.4rem;
      border-radius: 30px;
      font-weight: bold;
      transition: all 0.4s ease;
    }

    .modal .btn-submit:hover {
      transform: scale(1.06);
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
    }

    .btn-close {
      filter: invert(60%);
      transition: 0.3s;
    }

    .btn-close:hover {
      transform: scale(1.1) rotate(90deg);
    }

    @keyframes popIn {
      0% { opacity: 0; transform: scale(0.9) translateY(30px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    @keyframes pulseColor {
      0% { color: #6a11cb; }
      50% { color: #2575fc; }
      100% { color: #6a11cb; }
    }
  </style>
</head>

<body>

<div class="main-card">
  <h2 ><i class="bi bi-person-circle me-2"></i>My Profile</h2>  
     {% if user.last_name == 'seller' %}
        <a style="margin-left:460px;" class="btn" data-bs-toggle="modal" data-bs-target="#uploadArtist">
      Connect with Public
        </a>
  {% endif %}

  <div class="profile-info">
    <div class="info-item">
      <div class="info-icon green"><i class="bi bi-person-fill"></i></div>
      <div>
        <div class="info-label">Username</div>
        <div class="info-value">{{ user.username|title }}</div>
      </div>
    </div>

    <div class="info-item">
      <div class="info-icon blue"><i class="bi bi-envelope-fill"></i></div>
      <div>
        <div class="info-label">Email</div>
        <div class="info-value">{{ user.email }}</div>
      </div>
    </div>

    <div class="info-item">
      <div class="info-icon orange"><i class="bi bi-telephone-fill"></i></div>
      <div>
        <div class="info-label">Phone</div>
        <div class="info-value">{{ user.first_name }}</div>
      </div>
    </div>

    <div class="info-item">
      <div class="info-icon purple"><i class="bi bi-person-vcard-fill"></i></div>
      <div>
        <div class="info-label">Role</div>
        <div class="info-value">{{ user.last_name }}</div>
      </div>
    </div>

    <div class="info-item">
      {% if user.is_superuser %}
        <div class="info-icon red"><i class="bi bi-shield-lock-fill"></i></div>
        <div>
          <div class="info-label">Access Level</div>
          <div class="info-value"><strong>Admin</strong></div>
        </div>
      {% else %}
        <div class="info-icon red"><i class="bi bi-person-lines-fill"></i></div>
        <div>
          <div class="info-label">Access Level</div>
          <div class="info-value"><strong>Regular User</strong></div>
        </div>
      {% endif %}
    </div>
  </div>
<div class="lgot">
  {% if user.last_name == 'seller' %}
    <button class="upload-art-btn" data-bs-toggle="modal" data-bs-target="#uploadArtModal">
      <i class="bi bi-upload me-1"></i>Upload Artwork
    </button>
  {% endif %}

  <a href="{% url 'login_signup' %}" class="logout-btn">
    <i class="bi bi-box-arrow-right me-1"></i>Logout
  </a>
</div></div>
<style>
 body {
    background: url('{% static "art-bg.jpg" %}') no-repeat center center fixed;
    background-size: cover;
    font-family: 'Segoe UI', sans-serif;
  }

  h2 {
    font-weight: bold;
    text-align: center;
    margin: 40px 0 20px;
    color: #7b1fa2;
    font-size: 4rem;
    text-shadow: 1px 1px 4px #fff;
    font-family:cursive;
  }
.commission-header{
  padding-left:10px;
}

    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }


        body {
      background: url('{% static "bg-art.jpg" %}') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Segoe UI', sans-serif;
    }

    .buyer-card, .accepted-card {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 25px;
      margin: 20px auto;
      max-width: 600px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      border-left: 6px solid #4caf50;
      transition: all 0.3s ease;
      animation: fadeInUp 0.6s ease;
    }

    .buyer-card:hover, .accepted-card:hover {
      transform: scale(1.02);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    }

    .card-header {
      font-size: 1.4rem;
      font-weight: bold;
      color: #2e7d32;
      margin-bottom: 15px;
    }

    .buyer-details p, .accepted-card p {
      margin: 5px 0;
      font-size: 1.05rem;
    }

    .buyer-details span {
      font-weight: bold;
      color: #333;
    }

    .interest-message {
      background: #e8f5e9;
      padding: 10px 15px;
      border-radius: 10px;
      margin: 15px 0;
      color: #2e7d32;
      font-weight: 500;
    }
.accept-btn{
  width:140px;
  height:50px;
}
.action-buttons{
  padding-left:40px
}

@keyframes fadeSlide {
  0% { opacity: 0; transform: translateY(10px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
  0% { opacity: 0; transform: translateY(-30px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes bounceArt {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-12px); }
}

@keyframes rotateEarth {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}


@keyframes pulseColor {
  0% { color: #000000e9; }
  10% { color: #000000dd; }
  20% { color: #000000d3; }
  30% { color: #000000b0; }
  40% { color: #00000086; }
  50% { color: #00000060; }
  60% { color: #0000007c; }
  70% { color: #00000096; }
  80% { color: #000000c1; }
  90% { color: #000000f0; }
  100% { color: #000000ff; }
}

@keyframes slideInText {
  0% { opacity: 0; transform: translateX(-20px); }
  100% { opacity: 1; transform: translateX(0); }
}
    body {
      background: linear-gradient(to right, #e1ece8, #e7ebe0, #eee8e3);
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
    }
  </style>

{% if user.last_name == 'seller' %}
<!-- Modal -->

<div class="modal fade" id="uploadArtist" tabindex="-1" aria-labelledby="uploadArtModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="uploadArtModalLabel">
          <i class="bi text-primary me-2"></i>Upload Your profile
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="POST" action="{% url 'profile' %}" enctype="multipart/form-data">
          {% csrf_token %}
          
          <input type="hidden" name="form_type" value="artist">

          <div class="mb-3">
            <label class="form-label">üé® Upload your Photo</label>
            <input name="artistpic" class="form-control" type="file" required>
          </div>

          <div class="mb-3">
            <label class="form-label">üñåÔ∏è Artist Name</label>
            <input class="form-control" type="text" name="artistname" placeholder="Enter your name..." required>
          </div>

          <button type="submit" class="btn btn-submit w-80">
            <i class="bi bi-cloud-upload-fill me-2"></i>Submit
          </button>
        </form>
      </div>
    </div>
  </div>
</div>



<div class="modal fade" id="uploadArtModal" tabindex="-1" aria-labelledby="uploadArtModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="uploadArtModalLabel">
          <i class="bi text-primary me-2"></i>Upload Your Artwork
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="POST" action="{% url 'profile' %}" enctype="multipart/form-data">
          {% csrf_token %}
          <input type="hidden" name="form_type" value="artwork">

          <div class="mb-3">
            <label class="form-label">üé® Upload Image</label>
            <input name="sellerartwork" class="form-control" type="file" required>
          </div>

          <div class="mb-3">
            <label class="form-label">üñåÔ∏è Art Title</label>
            <input class="form-control" type="text" name="selltitle" placeholder="Enter title..." required>
          </div>

          <div class="mb-3">
            <label class="form-label">üìù Description</label>
            <textarea class="form-control" name="d" rows="3" placeholder="Describe your art..." required></textarea>
          </div>

          <div class="mb-3">
            <label class="form-label">üí∞ Price (‚Çπ)</label>
            <input class="form-control" type="number" name="p" placeholder="Set a price..." required>
          </div>

          <button type="submit" class="btn btn-submit w-60">
            <i class="bi bi-cloud-upload-fill me-2"></i>Submit Artwork
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endif %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
{% if user.last_name == "seller" %}
<h2 class="commission-header">
  <span class="pulse-text">Commission Requests</span>   
  <span class="pulse-text">from</span>   
  <span class="pulse-text">Art Lovers</span> 
</h2>

<div class="card-container">
  {% for commission in buyers %}
  <div class="commission-card-modern">
    <!-- Artwork Image -->
    <div class="card-image">
      <img src="{{ commission.image.url }}" alt="Commission Image" />
    </div>

    <!-- Info Panel -->
    <div class="card-info">
      <h3 class="artist-name">Draw Their Dream Artworküí≠</h3>
      <p><strong>üìû Phone:</strong> {{ commission.phone }}</p>
      <p><strong>üìß Email:</strong> {{ commission.email }}</p>
      <p><strong>üñåÔ∏è Medium:</strong> {{ commission.medium }}</p>
      <p><strong>üí∞ Price:</strong> ‚Çπ{{ commission.price }}</p>
      <p><strong>‚úèÔ∏è Customization:</strong> {{ commission.customization }}</p>

      <div class="action-buttons">
        <form method="POST" onsubmit="return confirm('Delete this request?');">
          {% csrf_token %}
          <input type="hidden" name="delete_id" value="{{ commission.id }}">
          <button type="submit" class="commission-btn delete-btn">üóëÔ∏è Delete</button>
        </form>
        <button class="commission-btn accept-btn" onclick="acceptRequest('{{ commission.id }}', '{{ commission.email }}', '{{ commission.medium }}')">ü§ù Accept</button>
      </div>
    </div>
  </div>

  {% empty %}
    <p class="no-commissions">No commission requests found.</p>
  {% endfor %}
</div>
{% endif %}

<style>
/* Header */
.commission-header {
  font-weight: bold;
  font-size: 2.5rem;
  color: #333;
  text-align: center;
  display: flex;
  justify-content: center;
  gap: 12px;
  padding: 30px 0 50px;
  animation: slideIn 1.5s ease-out;
}
.bounce-icon { display: inline-block; animation: bounceArt 1.8s infinite; }
.pulse-text { animation: pulseColor 4s infinite; }

/* Card container */
.card-container {
  display: flex;
  flex-direction: column;
  gap: 30px;
  padding: 0 20px 100px;
  align-items: center;
}

/* Modern Horizontal Card */
.commission-card-modern {
  display: flex;
  background: rgba(255,255,255,0.9);
  backdrop-filter: blur(12px);
  border-radius: 25px;
  width: 900px;
  overflow: hidden;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.commission-card-modern:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 35px rgba(0,0,0,0.25);
}

/* Image */
.card-image img {
  width: 400px;
  height: 600px;
  margin:20px;
  object-fit: cover;
  transition: transform 0.3s ease;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
  border-radius:32px;
}

/* Info Panel */
.card-info {
  flex: 1;
  background:#fefefe;
  padding: 30px 35px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.card-info h3.artist-name {
  font-size: 1.8rem;
  margin-bottom: 15px;
  color: #222;
}
.card-info p {
  margin: 6px 0;
  font-size: 1.2rem;
  color: #333;
  line-height: 1.5;
}

/* Buttons */
.action-buttons {
  display: flex;
  gap: 20px;
  margin-top: 20px;
}
.commission-btn {
  border: 1px solid #ddd;
  padding: 10px 22px;
  border-radius: 50px;
  font-size: 1.1rem;
  font-weight: 500;
  cursor: pointer;
  background-color: white;
  color: #333;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0,0,0,0.28);
  transition: background-color 0.25s ease, color 0.25s ease, box-shadow 0.25s ease, transform 0.15s ease;
}
.commission-btn:hover {
  background-color: #e8f5e9;
  border-color: #4CAF50;
  color: #2e7d32;
  box-shadow: 0 2px 6px rgba(76, 175, 80, 0.15);
  transform: translateY(-1px);
}

/* Delete button special hover */
.delete-btn:hover {
  background-color: #ffebee;
  border-color: #f44336;
  color: #c62828;
  box-shadow: 0 2px 6px rgba(244, 67, 54, 0.15);
}

/* No commissions text */
.no-commissions {
  text-align: center;
  font-size: 1.2rem;
  color: #666;
  padding: 40px 0;
}
</style>
{% if user.last_name == "buyier" %}
<!-- üßë‚Äçüé® Buyer View: Accepted Commissions -->
<h2 style="text-align:center; margin-top:200px;padding-bottom:40px; font-size:3.5rem; color:black;"> ‚úÖ Your Accepted Commission Requests</h2>
<div style="padding-bottom:100px;" class="accepted-container" id="acceptedContainer"></div>
{% endif %}
<script>
  function acceptRequest(id, name, artType) {
    const timestamp = new Date().toLocaleString();
    const acceptedObj = { id, name, artType, timestamp };

    let acceptedRequests = JSON.parse(localStorage.getItem("acceptedRequests")) || [];
    acceptedRequests.push(acceptedObj);
    localStorage.setItem("acceptedRequests", JSON.stringify(acceptedRequests));

    showAcceptPopup(name, artType);
  }

  function showAcceptPopup(name, artType) {
    const popup = document.createElement("div");
    popup.innerHTML = `‚úÖ <strong>Accepted:</strong> ${name}'s commission request for <strong>${artType}</strong>`;
    popup.style.position = "fixed";
    popup.style.top = "-100px";
    popup.style.left = "50%";
    popup.style.transform = "translateX(-50%)";
    popup.style.background = "linear-gradient(90deg, #43e97b, #38f9d7)";
    popup.style.color = "#fff";
    popup.style.padding = "16px 24px";
    popup.style.borderRadius = "12px";
    popup.style.fontWeight = "600";
    popup.style.boxShadow = "0 8px 24px rgba(0,0,0,0.3)";
    popup.style.zIndex = "9999";
    popup.style.animation = "slideDown 0.6s ease-out forwards, bounce 0.5s 0.6s ease";

    document.body.appendChild(popup);

    setTimeout(() => { popup.style.animation = "slideUp 0.6s ease-in forwards"; }, 3000);
    setTimeout(() => { popup.remove(); }, 3600);
  }

  // BUYER: Display accepted commission requests
  document.addEventListener("DOMContentLoaded", () => {
    const container = document.getElementById("acceptedContainer");
    if (!container) return;

    let accepted = JSON.parse(localStorage.getItem("acceptedRequests")) || [];
    if (accepted.length === 0) {
      container.innerHTML = "<p style='text-align:center;'>No accepted commissions found.</p>";
      return;
    }

    accepted.forEach((item, index) => {
      const card = document.createElement("div");
      card.className = "accepted-card";
      card.innerHTML = `
        <h3>üé® Art Type: ${item.artType}</h3>
        <p><strong>üë§ Buyer:</strong> ${item.name}</p>
        <p><strong>üìÖ Accepted on:</strong> ${item.timestamp}</p>
        <p>‚úÖ Your commission request has been accepted! Stay tuned for updates. üéâ</p>
        <div style="text-align:right;">
          <button class="delete-btn">üóëÔ∏è Delete</button>
        </div>
      `;
      card.querySelector(".delete-btn").addEventListener("click", () => {
        if (confirm("Delete this accepted commission?")) {
          accepted.splice(index, 1);
          localStorage.setItem("acceptedRequests", JSON.stringify(accepted));
          location.reload();
        }
      });
      container.appendChild(card);
    });
  });

  // Animations
  const style = document.createElement("style");
  style.innerHTML = `
    @keyframes slideDown {
      from { top: -100px; opacity: 0; }
      to { top: 30px; opacity: 1; }
    }
    @keyframes bounce {
      0% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.05); }
      100% { transform: translateX(-50%) scale(1); }
    }
    @keyframes slideUp {
      from { top: 30px; opacity: 1; }
      to { top: -100px; opacity: 0; }
    }
  `;
  document.head.appendChild(style);
</script>

{% include "footer.html" %}











